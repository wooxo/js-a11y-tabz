'use strict';var twCounter=1;function TabPanel(o){'use strict';var _=this;if(o.target){_.id = twCounter++;}_.o = o;_.deletePanel = function(t){var n,w,at,ap;if(t.hasAttribute('role') && t.getAttribute('role') == 'tab'){at = t;n = t.parentNode;w = n.nextSibling;ap = w.querySelector(t.hash);}else {while(t.getAttribute('role') != 'tabpanel') {t = t.parentNode;}ap = t;w = t.parentNode;n = w.previousSibling;at = n.querySelector('[aria-controls=' + ap.id + ']');}if(ap.hasAttribute('data-deletion')){n.removeChild(at);w.removeChild(ap);if(at.nextSibling)at.nextSibling.focus();else if(n.firstChild)n.firstChild.focus();else {n.parentNode.removeChild(n);w.parentNode.removeChild(w);}}};_.handleUserEvent = function(e){e = e?e:arguments[0];var t=e.target,kc=e.keyCode,at=(t.hasAttribute('role') && t.getAttribute('role')) === 'tab'?t:this.previousSibling.querySelector('[aria-selected=true]'),n=at.parentNode,w=n.nextSibling;if(e.type === 'focus' && t.hasAttribute('aria-controls') && t.getAttribute('aria-selected') !== 'true'){t.removeAttribute('tabindex');_.displayTab(t);e.preventDefault();e.stopPropagation();}if(e.type === 'keydown'){if(t.hasAttribute('role') && t.getAttribute('role','tab') && e.ctrlKey === false){if(kc === 37 || kc === 38 || kc === 33){if(t.previousSibling)t.previousSibling.focus();else n.lastChild.focus();}if(kc === 39 || kc === 40 || kc === 34){if(t.nextSibling)t.nextSibling.focus();else n.firstChild.focus();}if(kc === 36)n.firstChild.focus();if(kc === 35)n.lastChild.focus();e.stopPropagation();}if(e.ctrlKey === true){if(kc === 38 || kc === 40){if(t !== at)at.focus();else {at = at.parentNode;while(at.hasAttribute('role') && at.getAttribute('role') !== 'tabpanel') {at = at.parentNode;}if(at !== document.body){at = at.parentNode.previousSibling.querySelector('[aria-selected=true]');at.focus();}}}if(kc === 37){if(at.previousSibling)at.previousSibling.focus();else at.parentNode.lastChild.focus();}if(kc === 39){if(at.nextSibling)at.nextSibling.focus();else at.parentNode.firstChild.focus();}if(kc === 33){if(at.previousSibling)at.previousSibling.focus();else n.lastChild.focus();}if(kc === 34){if(at.nextSibling)at.nextSibling.focus();else n.firstChild.focus();}e.stopPropagation();}}if(e.type === 'click' && t.hasAttribute('data-delPanel') || e.type === 'keyup' && e.altKey && kc == 46){_.deletePanel(t,this);e.preventDefault();e.stopPropagation();}if(e.type === 'click' && (t.hasAttribute('role') && t.getAttribute('role') === 'tab' || t.hasAttribute('data-delPanel')))e.preventDefault();e.stopPropagation();return false;};_.displayTab = function(t){var h,p=_.o.prefix,f,i,c,nav=t.parentNode,ap,lp,tp=nav.nextSibling.children,at=nav.querySelectorAll('[role=tab]');for(i = 0;i < tp.length;++i) {if(tp[i].getAttribute('aria-selected') === 'true'){lp = tp[i];}else {tp[i].classList.remove('isAnimated');tp[i].setAttribute('aria-hidden',true);tp[i].setAttribute('aria-selected',false);}}if(t.hasAttribute('aria-selected') && t.getAttribute('aria-selected') !== true){h = t.hash.replace('#','');ap = document.getElementById(h);if(at){for(i = 0;i < at.length;i++) {c = at[i];if(c !== t){at[i].setAttribute('tabindex','-1');at[i].setAttribute('aria-selected',false);}}}t.setAttribute('aria-selected',true);t.removeAttribute('tabindex');if(_.o.anim){for(i = 0;i < tp.length;i++) {c = tp[i];if(c !== lp && c !== ap){c.classList.remove('isAnimated');c.setAttribute('aria-selected',false);c.setAttribute('aria-hidden',true);}}if(lp && lp !== ap){lp.classList.add('isAnimated');lp.addEventListener(_.o.anim,_.animTimer,true);}if(ap){ap.classList.add('isAnimated');ap.addEventListener(_.o.anim,_.animTimer,true);}}else if(tp){for(i = 0;i < tp.length;i++) {if(tp[i] !== ap)tp[i].setAttribute('aria-hidden',true);}}for(i = 0;i < tp.length;i++) {if(tp[i] !== ap)tp[i].setAttribute('aria-selected',false);}ap.setAttribute('aria-selected',true);ap.removeAttribute('aria-hidden');if(_.o.secureTabIndex)_.secureTabIndex(lp,true);if(_.o.secureTabIndex)_.secureTabIndex(ap,false);t.setAttribute('aria-selected',true);return {panel:ap,tab:t};}};_.generateTabs = function(w){var p=_.o.prefix,n=document.createElement('nav'),b=document.createElement('a'),bt=document.createElement('button'),h=window.location.hash || 0,th=[],cbt,s,id,tn,ctn;n.setAttribute('role','tablist');if(_.o.addClass){n.classList.add(p + 'tabs__nav');b.classList.add(p + 'tabs__nav-item');bt.classList.add(p + 'tabs__btn--delete');}bt.setAttribute('role','button');bt.setAttribute('data-delPanel','delete current panel from document');bt.type = 'button';bt.onClick = _.handleUserEvent;s = w.children;if(!s[0].parentNode.querySelector('[aria-selected=true]')){s[0].setAttribute('aria-selected','true');}for(var it=0;it < s.length;it++) {if(!s[it].id){s[it].id = 'w' + _.id + 's' + (it + 1);}id = s[it].id;if(h !== 0 && s[it].querySelector(h)){th.push(id);}s[it].setAttribute('aria-labelledby','tab-' + id);s[it].setAttribute('role','tabpanel');tn = s[it].getAttribute('data-name') || it + 1;if(s[it].hasAttribute('data-deletion') && _.o.deleteBtn){cbt = bt.cloneNode();cbt.innerHTML = _.o.deleteBtnString + '"' + tn + '"';s[it].insertBefore(cbt,s[it].firstChild);}ctn = b.cloneNode(true);ctn.href = '#' + id;ctn.innerHTML = tn;ctn.setAttribute('role','tab');ctn.id = 'tab-' + id;ctn.setAttribute('aria-controls',id);if(!s[it].hasAttribute('aria-selected')){ctn.setAttribute('tabindex','-1');ctn.setAttribute('aria-selected',false);s[it].setAttribute('aria-hidden',true);s[it].setAttribute('aria-selected',false);if(_.o.secureTabIndex)_.secureTabIndex(s[it],true);}else {ctn.setAttribute('aria-selected',true);}n.appendChild(ctn);}n.addEventListener('click',_.handleUserEvent,true);n.addEventListener('focus',_.handleUserEvent,true);n.addEventListener('keydown',_.handleUserEvent,true);w.addEventListener('keydown',_.handleUserEvent,true);w.addEventListener('keyup',_.handleUserEvent,true);w.addEventListener('click',_.handleUserEvent,true);w.addEventListener('focus',_.handleUserEvent,true);w.parentNode.insertBefore(n,w);if(th.length !== 0){for(var i=0;i < th.length;i++) {_.displayTab(document.getElementById('tab-' + th[i]));}h = document.getElementById(h.replace('#',''));h.focus();}};_.animTimer = function(){this.classList.remove('isAnimated');if(this.getAttribute('aria-selected') === 'false'){this.setAttribute('aria-hidden',true);}this.removeEventListener(_.o.anim,_.animTimer,true);};_.animEvent = function(){var e,el=document.createElement('fakeelement'),events={'animation':'animationend','OAnimation':'oAnimationEnd','MozAnimation':'animationend','WebkitTransition':'webkitAnimationEnd'};for(e in events) {if(el.style[e] !== undefined){return events[e];}}};_.secureTabIndex = function(node,lock){var c=node?node.querySelectorAll('a, button, input, textarea, select'):0;if(c.length){for(var i=0;i < c.length;i++) {if(lock)c[i].setAttribute('tabindex','-1');else if(c[i].hasAttribute('tabindex'))c[i].removeAttribute('tabindex');}}};(function(){_.o.deleteBtnString = o.deleteBtnString || 'Delete ';_.o.target = _.o.target || '.a11ytabz';_.o.anim = _.o.anim?_.animEvent():false;_.o.prefix = _.o.prefix || '';_.o.deleteBtn = _.o.deleteBtn !== false?true:_.o.deleteBtn;_.generateTabs(_.o.target);})();}